(()=>{(()=>{var jt={3156:function(L,O,S){(function(F,q){L.exports=O=q()})(this,function(){var F=F||function(q,U){var x;if(typeof window!="undefined"&&window.crypto&&(x=window.crypto),typeof self!="undefined"&&self.crypto&&(x=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(x=globalThis.crypto),!x&&typeof window!="undefined"&&window.msCrypto&&(x=window.msCrypto),!x&&typeof S.g!="undefined"&&S.g.crypto&&(x=S.g.crypto),!x)try{x=S(477)}catch(h){}var M=function(){if(x){if(typeof x.getRandomValues=="function")try{return x.getRandomValues(new Uint32Array(1))[0]}catch(h){}if(typeof x.randomBytes=="function")try{return x.randomBytes(4).readInt32LE()}catch(h){}}throw new Error("Native crypto module could not be used to get secure random number.")},$=Object.create||function(){function h(){}return function(p){var w;return h.prototype=p,w=new h,h.prototype=null,w}}(),tt={},K=tt.lib={},Y=K.Base=function(){return{extend:function(h){var p=$(this);return h&&p.mixIn(h),(!p.hasOwnProperty("init")||this.init===p.init)&&(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var h=this.extend();return h.init.apply(h,arguments),h},init:function(){},mixIn:function(h){for(var p in h)h.hasOwnProperty(p)&&(this[p]=h[p]);h.hasOwnProperty("toString")&&(this.toString=h.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),H=K.WordArray=Y.extend({init:function(h,p){h=this.words=h||[],p!=U?this.sigBytes=p:this.sigBytes=h.length*4},toString:function(h){return(h||V).stringify(this)},concat:function(h){var p=this.words,w=h.words,y=this.sigBytes,I=h.sigBytes;if(this.clamp(),y%4)for(var A=0;A<I;A++){var z=w[A>>>2]>>>24-A%4*8&255;p[y+A>>>2]|=z<<24-(y+A)%4*8}else for(var B=0;B<I;B+=4)p[y+B>>>2]=w[B>>>2];return this.sigBytes+=I,this},clamp:function(){var h=this.words,p=this.sigBytes;h[p>>>2]&=4294967295<<32-p%4*8,h.length=q.ceil(p/4)},clone:function(){var h=Y.clone.call(this);return h.words=this.words.slice(0),h},random:function(h){for(var p=[],w=0;w<h;w+=4)p.push(M());return new H.init(p,h)}}),et=tt.enc={},V=et.Hex={stringify:function(h){for(var p=h.words,w=h.sigBytes,y=[],I=0;I<w;I++){var A=p[I>>>2]>>>24-I%4*8&255;y.push((A>>>4).toString(16)),y.push((A&15).toString(16))}return y.join("")},parse:function(h){for(var p=h.length,w=[],y=0;y<p;y+=2)w[y>>>3]|=parseInt(h.substr(y,2),16)<<24-y%8*4;return new H.init(w,p/2)}},j=et.Latin1={stringify:function(h){for(var p=h.words,w=h.sigBytes,y=[],I=0;I<w;I++){var A=p[I>>>2]>>>24-I%4*8&255;y.push(String.fromCharCode(A))}return y.join("")},parse:function(h){for(var p=h.length,w=[],y=0;y<p;y++)w[y>>>2]|=(h.charCodeAt(y)&255)<<24-y%4*8;return new H.init(w,p)}},g=et.Utf8={stringify:function(h){try{return decodeURIComponent(escape(j.stringify(h)))}catch(p){throw new Error("Malformed UTF-8 data")}},parse:function(h){return j.parse(unescape(encodeURIComponent(h)))}},b=K.BufferedBlockAlgorithm=Y.extend({reset:function(){this._data=new H.init,this._nDataBytes=0},_append:function(h){typeof h=="string"&&(h=g.parse(h)),this._data.concat(h),this._nDataBytes+=h.sigBytes},_process:function(h){var p,w=this._data,y=w.words,I=w.sigBytes,A=this.blockSize,z=A*4,B=I/z;h?B=q.ceil(B):B=q.max((B|0)-this._minBufferSize,0);var J=B*A,rt=q.min(J*4,I);if(J){for(var st=0;st<J;st+=A)this._doProcessBlock(y,st);p=y.splice(0,J),w.sigBytes-=rt}return new H.init(p,rt)},clone:function(){var h=Y.clone.call(this);return h._data=this._data.clone(),h},_minBufferSize:0}),N=K.Hasher=b.extend({cfg:Y.extend(),init:function(h){this.cfg=this.cfg.extend(h),this.reset()},reset:function(){b.reset.call(this),this._doReset()},update:function(h){return this._append(h),this._process(),this},finalize:function(h){h&&this._append(h);var p=this._doFinalize();return p},blockSize:512/32,_createHelper:function(h){return function(p,w){return new h.init(w).finalize(p)}},_createHmacHelper:function(h){return function(p,w){return new W.HMAC.init(h,w).finalize(p)}}}),W=tt.algo={};return tt}(Math);return F})},2316:function(L,O,S){(function(F,q){L.exports=O=q(S(3156))})(this,function(F){return function(q){var U=F,x=U.lib,M=x.WordArray,$=x.Hasher,tt=U.algo,K=[],Y=[];(function(){function V(N){for(var W=q.sqrt(N),h=2;h<=W;h++)if(!(N%h))return!1;return!0}function j(N){return(N-(N|0))*4294967296|0}for(var g=2,b=0;b<64;)V(g)&&(b<8&&(K[b]=j(q.pow(g,.5))),Y[b]=j(q.pow(g,.3333333333333333)),b++),g++})();var H=[],et=tt.SHA256=$.extend({_doReset:function(){this._hash=new M.init(K.slice(0))},_doProcessBlock:function(V,j){for(var g=this._hash.words,b=g[0],N=g[1],W=g[2],h=g[3],p=g[4],w=g[5],y=g[6],I=g[7],A=0;A<64;A++){if(A<16)H[A]=V[j+A]|0;else{var z=H[A-15],B=(z<<25|z>>>7)^(z<<14|z>>>18)^z>>>3,J=H[A-2],rt=(J<<15|J>>>17)^(J<<13|J>>>19)^J>>>10;H[A]=B+H[A-7]+rt+H[A-16]}var st=p&w^~p&y,yt=b&N^b&W^N&W,nt=(b<<30|b>>>2)^(b<<19|b>>>13)^(b<<10|b>>>22),_t=(p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25),it=I+_t+st+Y[A]+H[A],Z=nt+yt;I=y,y=w,w=p,p=h+it|0,h=W,W=N,N=b,b=it+Z|0}g[0]=g[0]+b|0,g[1]=g[1]+N|0,g[2]=g[2]+W|0,g[3]=g[3]+h|0,g[4]=g[4]+p|0,g[5]=g[5]+w|0,g[6]=g[6]+y|0,g[7]=g[7]+I|0},_doFinalize:function(){var V=this._data,j=V.words,g=this._nDataBytes*8,b=V.sigBytes*8;return j[b>>>5]|=128<<24-b%32,j[(b+64>>>9<<4)+14]=q.floor(g/4294967296),j[(b+64>>>9<<4)+15]=g,V.sigBytes=j.length*4,this._process(),this._hash},clone:function(){var V=$.clone.call(this);return V._hash=this._hash.clone(),V}});U.SHA256=$._createHelper(et),U.HmacSHA256=$._createHmacHelper(et)}(Math),F.SHA256})},116:()=>{(function(L,O){"use strict";L=L||"docReady",O=O||window;var S=[],F=!1,q=!1;function U(){if(!F){F=!0;for(var M=0;M<S.length;M++)S[M].fn.call(window,S[M].ctx);S=[]}}function x(){document.readyState==="complete"&&U()}O[L]=function(M,$){if(typeof M!="function")throw new TypeError("callback for docReady(fn) must be a function");if(F){setTimeout(function(){M($)},1);return}else S.push({fn:M,ctx:$});document.readyState==="complete"||!document.attachEvent&&document.readyState==="interactive"?setTimeout(U,1):q||(document.addEventListener?(document.addEventListener("DOMContentLoaded",U,!1),window.addEventListener("load",U,!1)):(document.attachEvent("onreadystatechange",x),window.attachEvent("onload",U)),q=!0)}})("docReady",window)},477:()=>{}},wt={};function X(L){var O=wt[L];if(O!==void 0)return O.exports;var S=wt[L]={exports:{}};return jt[L].call(S.exports,S,S.exports,X),S.exports}X.n=L=>{var O=L&&L.__esModule?()=>L.default:()=>L;return X.d(O,{a:O}),O},X.d=(L,O)=>{for(var S in O)X.o(O,S)&&!X.o(L,S)&&Object.defineProperty(L,S,{enumerable:!0,get:O[S]})},X.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(L){if(typeof window=="object")return window}}(),X.o=(L,O)=>Object.prototype.hasOwnProperty.call(L,O);var ve={};(()=>{"use strict";var L=X(2316),O=X.n(L);const S=document,F=null,q=null,U=()=>{const r=S.createElement("a");return r.href=q.location,r},x=(r,t)=>{const e=S.createElement("img");return e.height=1,e.width=1,e.style.display="none",e.src=r,e.onload=t,e.alt="",S.body.appendChild(e)},M=r=>{const t=S.createElement("iframe");return t.width=1,t.height=1,t.style.display="none",t.src=r,S.body.appendChild(t)},$=(r,t=!0)=>{const e=S.createElement("script");return e.type="text/javascript",e.src=r,e.async=t,S.body.appendChild(e)},tt={img:x,script:$,iframe:M},K=(r,t)=>{t||(t=window.location.href),r=r.replace(/[\[\]]/g,"\\$&");let e=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)"),n=e.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},Y=(r,t,e=()=>{},n=1e3)=>{function s(o,i,f,E){e(f)}const a=new XMLHttpRequest;a.open("get",r,!0),a.timeout=n,a.withCredentials=!0,a.ontimeout=()=>{const o=new Error(`Timeout after ${n}, url : ${r}`);s("AjaxTimeout",`Timeout after ${n}`,o,a)},a.setRequestHeader("Content-type","application/json"),a.onreadystatechange=()=>{if(a.readyState===4){const o=a.status;if(o>=200&&o<300||o===304)t(a.responseText,a);else{const i=new Error(`Incorrect status received : ${o}`);s("XHRError",`Error during XHR call: ${o}, url: ${r}`,i,a)}}},a.send()},H=r=>{let t="_au_"+r+"=",n=decodeURIComponent(document.cookie).split(";");for(let s=0;s<n.length;s++){let a=n[s];for(;a.charAt(0)==" ";)a=a.substring(1);if(a.indexOf(t)==0)return a.substring(t.length,a.length)}return null},et=(r,t,e)=>(parseInt(H(r))||0)+t<e,V=r=>{const t=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i;let n=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,s=r.split("."),a=s[s.length-1];(a.length>4||a==="com"||a==="org"||a==="net")&&(n=t);let o=r.match(n);return o?o[0]:r},j=(r,t)=>{document.cookie="_au_"+r+"="+t+"; domain="+V(document.location.hostname)+"; path=/; max-age=31536000"};function g(r){let t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");r||(r=Math.floor(Math.random()*t.length));let e="";for(let n=0;n<r;n++)e+=t[Math.floor(Math.random()*t.length)];return e}function b(){const r=Math.round(Date.now()/1e3);return"AU1S-0100-"+String(r).padStart(12,"0")+"-"+g(8)+"-"+g(4)}function N(r){function t(v,m){var C,_,G,R,T;return G=v&2147483648,R=m&2147483648,C=v&1073741824,_=m&1073741824,T=(v&1073741823)+(m&1073741823),C&_?T^2147483648^G^R:C|_?T&1073741824?T^3221225472^G^R:T^1073741824^G^R:T^G^R}function e(v,m,C,_,G,R,T){return v=t(v,t(t(m&C|~m&_,G),T)),t(v<<R|v>>>32-R,m)}function n(v,m,C,_,G,R,T){return v=t(v,t(t(m&_|C&~_,G),T)),t(v<<R|v>>>32-R,m)}function s(v,m,C,_,G,R,T){return v=t(v,t(t(m^C^_,G),T)),t(v<<R|v>>>32-R,m)}function a(v,m,C,_,G,R,T){return v=t(v,t(t(C^(m|~_),G),T)),t(v<<R|v>>>32-R,m)}function o(v){var m="",C="",_;for(_=0;3>=_;_++)C=v>>>8*_&255,C="0"+C.toString(16),m+=C.substr(C.length-2,2);return m}var i=[],f,E,P,k,u,c,d,l;for(r=function(v){v=v.replace(/\r\n/g,`
`);for(var m="",C=0;C<v.length;C++){var _=v.charCodeAt(C);128>_?m+=String.fromCharCode(_):(127<_&&2048>_?m+=String.fromCharCode(_>>6|192):(m+=String.fromCharCode(_>>12|224),m+=String.fromCharCode(_>>6&63|128)),m+=String.fromCharCode(_&63|128))}return m}(r),i=function(v){var m,C=v.length;m=C+8;for(var _=16*((m-m%64)/64+1),G=Array(_-1),R=0,T=0;T<C;)m=(T-T%4)/4,R=T%4*8,G[m]|=v.charCodeAt(T)<<R,T++;return m=(T-T%4)/4,G[m]|=128<<T%4*8,G[_-2]=C<<3,G[_-1]=C>>>29,G}(r),u=1732584193,c=4023233417,d=2562383102,l=271733878,r=0;r<i.length;r+=16)f=u,E=c,P=d,k=l,u=e(u,c,d,l,i[r+0],7,3614090360),l=e(l,u,c,d,i[r+1],12,3905402710),d=e(d,l,u,c,i[r+2],17,606105819),c=e(c,d,l,u,i[r+3],22,3250441966),u=e(u,c,d,l,i[r+4],7,4118548399),l=e(l,u,c,d,i[r+5],12,1200080426),d=e(d,l,u,c,i[r+6],17,2821735955),c=e(c,d,l,u,i[r+7],22,4249261313),u=e(u,c,d,l,i[r+8],7,1770035416),l=e(l,u,c,d,i[r+9],12,2336552879),d=e(d,l,u,c,i[r+10],17,4294925233),c=e(c,d,l,u,i[r+11],22,2304563134),u=e(u,c,d,l,i[r+12],7,1804603682),l=e(l,u,c,d,i[r+13],12,4254626195),d=e(d,l,u,c,i[r+14],17,2792965006),c=e(c,d,l,u,i[r+15],22,1236535329),u=n(u,c,d,l,i[r+1],5,4129170786),l=n(l,u,c,d,i[r+6],9,3225465664),d=n(d,l,u,c,i[r+11],14,643717713),c=n(c,d,l,u,i[r+0],20,3921069994),u=n(u,c,d,l,i[r+5],5,3593408605),l=n(l,u,c,d,i[r+10],9,38016083),d=n(d,l,u,c,i[r+15],14,3634488961),c=n(c,d,l,u,i[r+4],20,3889429448),u=n(u,c,d,l,i[r+9],5,568446438),l=n(l,u,c,d,i[r+14],9,3275163606),d=n(d,l,u,c,i[r+3],14,4107603335),c=n(c,d,l,u,i[r+8],20,1163531501),u=n(u,c,d,l,i[r+13],5,2850285829),l=n(l,u,c,d,i[r+2],9,4243563512),d=n(d,l,u,c,i[r+7],14,1735328473),c=n(c,d,l,u,i[r+12],20,2368359562),u=s(u,c,d,l,i[r+5],4,4294588738),l=s(l,u,c,d,i[r+8],11,2272392833),d=s(d,l,u,c,i[r+11],16,1839030562),c=s(c,d,l,u,i[r+14],23,4259657740),u=s(u,c,d,l,i[r+1],4,2763975236),l=s(l,u,c,d,i[r+4],11,1272893353),d=s(d,l,u,c,i[r+7],16,4139469664),c=s(c,d,l,u,i[r+10],23,3200236656),u=s(u,c,d,l,i[r+13],4,681279174),l=s(l,u,c,d,i[r+0],11,3936430074),d=s(d,l,u,c,i[r+3],16,3572445317),c=s(c,d,l,u,i[r+6],23,76029189),u=s(u,c,d,l,i[r+9],4,3654602809),l=s(l,u,c,d,i[r+12],11,3873151461),d=s(d,l,u,c,i[r+15],16,530742520),c=s(c,d,l,u,i[r+2],23,3299628645),u=a(u,c,d,l,i[r+0],6,4096336452),l=a(l,u,c,d,i[r+7],10,1126891415),d=a(d,l,u,c,i[r+14],15,2878612391),c=a(c,d,l,u,i[r+5],21,4237533241),u=a(u,c,d,l,i[r+12],6,1700485571),l=a(l,u,c,d,i[r+3],10,2399980690),d=a(d,l,u,c,i[r+10],15,4293915773),c=a(c,d,l,u,i[r+1],21,2240044497),u=a(u,c,d,l,i[r+8],6,1873313359),l=a(l,u,c,d,i[r+15],10,4264355552),d=a(d,l,u,c,i[r+6],15,2734768916),c=a(c,d,l,u,i[r+13],21,1309151649),u=a(u,c,d,l,i[r+4],6,4149444226),l=a(l,u,c,d,i[r+11],10,3174756917),d=a(d,l,u,c,i[r+2],15,718787259),c=a(c,d,l,u,i[r+9],21,3951481745),u=t(u,f),c=t(c,E),d=t(d,P),l=t(l,k);return(o(u)+o(c)+o(d)+o(l)).toLowerCase()}class W{constructor(t){this.pixels=t,this.parameters={sku:"",orderId:"",qty:"",revenue:"",ltv:""}}dropPixel(t,e){const n=this.pixels[t]||[];let s=this.parameters;e&&Object.keys(e).forEach(a=>(s[a]=e[a],!1)),n.forEach(a=>{let o=a,i="img";return typeof a!="string"&&(o=a[0],i=a[1],i||(i="img")),o=o.replace(/\[\[SKU\]\]/g,s.sku),o=o.replace(/\[\[ORDERID\]\]/g,s.orderId),o=o.replace(/\[\[QTY\]\]/g,s.qty),o=o.replace(/\[\[REVENUE\]\]/g,s.revenue),o=o.replace(/\[\[LTV\]\]/g,s.ltv),o=o.replace(/\[\[ITEMS\]\]/g,(s.items||[]).map(f=>f.id||"").join(",")),i==="img"?x(o):i==="script"?$(o):i==="iframe"?M(o):!1})}}class h{constructor(t,e,n){this.w=t,this.partnerId=e,this.taggerId=n,window.aupixels?this.pixels=window.aupixels.ec||{}:this.pixels={},this.ECPixels=new W(this.pixels),this.pageLoadRun=[],window.Adgt||(window.Adgt={}),window.Adgt.VarWatch=function(s,a,o){let i=s[a];function f(){if(s[a]!=i){const E=i;i=s[a],o(E,i)}}return f},window.Adgt.VarHandler=function(s,a){window.au.push({category:"DispatchEvent",eventName:"ProductMetaUpdated"}),clearInterval(window.Adgt.variantInterval)},window.Adgt.SetVarInterval=function(s,a){window.Adgt.variantInterval=setInterval(window.Adgt.VarWatch(s,a,window.Adgt.VarHandler),100)},window.Adgt.Store=this}pathIncludes(t){return window.location.pathname.indexOf(t)!==-1}updatePixels(){this.pixels=window.aupixels.ec||{},this.ECPixels=new W(this.pixels),this.pageLoadRun.forEach(t=>{let e={};t==="add"||t==="view"?e={sku:this.product.id}:t==="checkout"?e={qty:this.qty,revenue:this.revenue}:t==="transaction"&&(e={qty:this.transaction.items.length||this.qty,revenue:this.transaction.revenue||this.revenue,orderId:this.transaction.id}),this.ECPixels.dropPixel(t,e)}),this.pageLoadRun=[]}appendPageLoadPixelCheck(t){this.pageLoadRun.filter(n=>n===t).length||this.pageLoadRun.push(t)}setClassProducts(t){this.products=t,this.qty=t.length,this.revenue=t.reduce((e,n)=>e+parseFloat(n.price),0)}sendAddProductEventToGA(t){this.product=t;try{this.sendAddProductToGA(t),this.w.audGtag("event","add_to_cart",{value:t.price.toFixed(2),items:[t]}),this.ECPixels.dropPixel("add",{sku:t.id,revenue:t.price.toFixed(2)})}catch(e){console.error(e)}}sendViewProductEventToGA(t){this.product=t;try{this.w.audGtag("event","view_promotion",{promotion_id:t.id,promotion_name:t.name,items:[t]}),this.w.audGtag("event","page_view",{page_title:t.id}),this.ECPixels.dropPixel("view",{sku:t.id})}catch(e){console.error(e)}}sendAllProductsInCartToGA(t,e){this.setClassProducts(t);try{for(let n=0;n<t.length;n++){const s=t[n];this.sendAddProductToGA(s)}return e(),!0}catch(n){return!1}}sendCheckoutEventToGA(){try{this.w.audGtag("event","begin_checkout",{currency:"USD",value:this.revenue,items:[this.products]}),this.ECPixels.dropPixel("checkout",{qty:this.qty,revenue:this.revenue})}catch(t){console.error(t)}}sendAllProductsInTransactionToGA(t,e){this.setClassProducts(t);try{for(let n=0;n<t.length;n++){const s=t[n];this.sendAddProductToGA(s)}return e(),!0}catch(n){return!1}}sendAddProductToGA(t){this.w.audGtag("event","add_to_cart",{currency:t.currencyCode,value:t.price*(t.quantity||1),items:[{item_id:t.id,item_name:t.name,index:0,item_brand:t.brand,price:t.price,quantity:t.quantity||1}]})}sendTransactionEventToGA(t){this.transaction=t;try{this.w.audGtag("event","purchase",{currency:t.currencyCode,transaction_id:t.id,value:t.revenue,tax:t.tax,shipping:t.shipping,items:t.items||[]}),this.w.audGtag("event","page_view",{page_title:t.id}),this.ECPixels.dropPixel("transaction",{qty:(t.items||[]).length||this.qty,revenue:t.revenue||this.revenue,orderId:t.id,items:t.items||[],ltv:t.ltv||""})}catch(e){console.error(e)}}profilerServiceRequest(t){window.au.push({category:"sendUserBehaviour",action:JSON.stringify(t)})}sendErrorToSentry(){return!1}}class p extends h{constructor(t,e,n){super(t,e,n),this.brand=window.Shopify.shop}captureProduct(t){try{const e=window.ShopifyAnalytics.meta.selectedVariantId;let n=window.ShopifyAnalytics.meta.product.variants[0];return t?n=window.ShopifyAnalytics.meta.product.variants.find(function(s){return s.public_title===t}):e&&(n=window.ShopifyAnalytics.meta.product.variants.find(function(s){return s.id.toString()===e.toString()})),n||(n=window.ShopifyAnalytics.meta.product.variants[0],n.id=window.ShopifyAnalytics.meta.product.id),{id:`${n.id}-${this.taggerId}`,name:n.name,price:parseInt(n.price,10)/100,brand:this.brand}}catch(e){return console.error(e),null}}sendProductEvents(){const t=this.captureProduct();if(t){this.sendViewProductEventToGA(t),this.appendPageLoadPixelCheck("view");const e=document.querySelector('button[name="add"]')||document.querySelector("form#add-item-form button")||document.querySelector("button.shopify_add_to_cart")||document.querySelector('input[name="add"]')||document.querySelector(".ProductForm__AddToCart")||document.querySelector("#AddToCart")||document.querySelector('.product-add input[type="submit"]');e&&window.au.push({category:"ListenerAttacher",input:e,method:()=>{this.sendAddProductEventToGA(t),window.au.push({category:"behavior",action:"purchase-intent"});const n={event:"addToCart",data:t};this.profilerServiceRequest(n)}})}}captureCart(){try{const e=document.querySelector("#order-summary").querySelectorAll("tr.product"),n=[];for(let s=0;s<e.length;s++){const a=e[s],o=a.dataset.productId,i=a.querySelector(".product__description__name").textContent,f=parseFloat(a.querySelector(".product__price").textContent.replace(/[^0-9.]/g,"")),E=parseInt(a.querySelector(".product__quantity").textContent.replace(/\s+/g,""),10),P={id:`${o}-${this.taggerId}`,name:i,brand:this.brand,price:f,quantity:E};n.push(P)}return n}catch(t){return console.error(t),null}}calculateRevenue(t){let e=0;for(let n=0;n<t.length;n++)e+=parseFloat(t[n].price);return e}captureTransaction(){try{const t=window.Shopify.checkout,e=window.Shopify.shop,n=t.order_id,s=parseFloat(t.subtotal_price);let a=0;try{a=parseFloat(t.total_tax)}catch(f){console.error(f)}let o=0;if(t.shipping_rate)try{o=parseFloat(t.shipping_rate)}catch(f){try{o=parseFloat(t.shipping_rate.price)}catch(E){console.error(E)}}const i=this.formatProductsInTransaction(t.line_items);return{id:`${n}-${this.taggerId}`,affiliation:e,revenue:s,tax:a,shipping:o,items:i}}catch(t){return console.error(t),null}}formatProductsInTransaction(t){const e=t,n=[];for(let s=0;s<e.length;s++){const a=e[s],o={id:a.product_id,name:a.title,brand:this.brand,price:parseFloat(a.price),quantity:a.quantity};n.push(o)}return n}initialize(){const t={product:window.ShopifyAnalytics&&window.ShopifyAnalytics.meta&&window.ShopifyAnalytics.meta.product,checkout:window.Shopify.Checkout&&window.Shopify.Checkout.page&&window.Shopify.Checkout.page!=="thank_you",confirmation:window.Shopify.checkout},e=document.querySelectorAll("div.quickadd");if(e.length>0)for(let n=0;n<e.length;n++){const s=e[n],a=s.querySelector("button").dataset.cartAdd;let o=s.querySelector('[class$="item__title"]').textContent;if(s.querySelector(".js-option-value")){const E=s.querySelector(".js-option-value").textContent.split(": ");o+=E[E.length-1]}const i=parseFloat(s.querySelector(".product-price__price").textContent.replace(/[^0-9.]/g,"")),f={id:a,name:o,price:i,brand:this.brand};window.au.push({category:"ListenerAttacher",input:s,method:()=>{this.sendAddProductEventToGA(f);const E={event:"addToCart",data:f};window.au.push({category:"behavior",action:"purchase-intent"}),this.profilerServiceRequest(E)}})}if(t.product){this.sendProductEvents();const n=document.querySelectorAll(".swatch-element");if(n.length>0){window.addEventListener("ProductMetaUpdated",()=>{this.sendProductEvents()});for(let s=0;s<n.length;s++){const a=n[s];window.au.push({category:"ListenerAttacher",input:a,method:()=>{window.Adgt.SetVarInterval(window.ShopifyAnalytics.meta,"selectedVariantId")}})}}}if(t.checkout){const n=this.captureCart();n&&(window.au.push({category:"behavior",action:"checkout"}),this.appendPageLoadPixelCheck("checkout"),this.sendAllProductsInCartToGA(n,()=>this.sendCheckoutEventToGA()))}if(t.confirmation&&window.location.pathname.indexOf("thank_you")!==-1){const n=this.captureTransaction();if(n){const s=n.items;window.au.push({category:"behavior",action:"purchase-complete"}),this.appendPageLoadPixelCheck("transaction"),this.sendAllProductsInTransactionToGA(s,()=>this.sendTransactionEventToGA(n))}else this.transaction={id:`null-${this.taggerId}`,affiliation:this.brand,revenue:0,tax:0,shipping:0,items:[]},this.appendPageLoadPixelCheck("transaction")}}}const w=p;class y{constructor(t,e,n){this.w=t,this.d=e,this.partnerId=n,this.LAST_SEEN_TCF_KEY="last_seen_iab_tcf",this.LAST_SEEN_CUSTOM_KEY="last_seen_iab_custom",this.COOKIE_TTL=30*24*60*60*1e3}sendToQueue(t){return this.w.au.push({category:"sendConsent",consented:t,consentType:"custom"}),!0}wmgConsentListeners(){this.d.querySelectorAll("div.overlay, .ppclose, .ppclose2").forEach(e=>{e.addEventListener("click",()=>this.sendToQueue(!0)),e.addEventListener("touchend",()=>this.sendToQueue(!0))})}uproxxConsentListeners(){this.d.querySelectorAll(".qc-cmp-button").forEach(e=>{let n=!0;e.textContent.toLowerCase().includes("do not")&&(n=!1),e.addEventListener("click",()=>this.sendToQueue(n)),e.addEventListener("touchend",()=>this.sendToQueue(n))})}addConsentListeners(){return String(this.partnerId)==="14"?(this.wmgConsentListeners(),!0):String(this.partnerId)==="24"?(this.uproxxConsentListeners(),!0):!1}}const I=60*1e3,A=60*I,z=24*A;function B(r){var t="au/test";try{return r.localStorage.setItem(t,t),r.localStorage.removeItem(t),!0}catch(e){return!1}}class J{constructor(t){this.w=t,this.now=1*new Date,this.useCookie=!B(this.w)}getCookie(t){return H(t)}get(t,e=!1){if(this.useCookie||e)return this.getCookie(t);let n=this.w.localStorage.getItem("au/"+t);if(n){if(n=JSON.parse(n),n.e>this.now)return n.v;this.w.localStorage.removeItem("au/"+t)}return null}setCookie(t,e,n=I){j(t,e)}set(t,e,n=I,s=!1){this.useCookie||s?this.setCookie(t,e,n):this.w.localStorage.setItem("au/"+t,JSON.stringify({v:e,e:this.now+n}))}}const rt=J,st=null,yt=null,nt="G-FVWZ0RM4DH",_t=null,it="https://a.ad.gt",Z="https://p.ad.gt",Nt="https://pixels.ad.gt",At="https://seg.ad.gt",Bt="https://ids.ad.gt",St="https://proton.ad.gt";var Et=r=>{throw TypeError(r)},Ut=(r,t,e)=>t.has(r)||Et("Cannot "+e),$t=(r,t,e)=>t.has(r)?Et("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),dt=(r,t,e)=>(Ut(r,t,"access private method"),e),at,Ct,lt,Pt;function Ft(r,t){let e=[];try{if(typeof t.featurePolicy=="undefined")return e;"browsingTopics"in t&&t.featurePolicy.allowsFeature("browsing-topics")&&e.push("BT"),"joinAdInterestGroup"in r.navigator&&t.featurePolicy.allowsFeature("join-ad-interest-group")&&e.push("JI"),"runAdAuction"in r.navigator&&t.featurePolicy.allowsFeature("run-ad-auction")&&e.push("RA"),t.featurePolicy.allowsFeature("attribution-reporting")&&e.push("AR")}catch(n){console.error(n)}return e}class Wt{constructor(t,e,n){$t(this,at),this.w=t,this.d=e,this.auvars=n,this.iframe=null,this.iframeQueue=[],this.iframeReady=!1}run(){let t=new XMLHttpRequest;const e=new URL(`${At}/api/v2/match`);let n={hostname:this.w.location.hostname,partner_id:this.auvars.p,audigent_id:this.auvars.a};this.auvars.t!=null&&(n.tagger_id=this.auvars.t);let s=V(this.w.location.hostname),a=this;return t.onload=function(){var o;if(t.readyState==XMLHttpRequest.DONE&&t.status==200){const i=JSON.parse(t.response);Array.isArray(i)&&i.length>0?(dt(o=a,at,Ct).call(o),i.forEach(f=>{var E;f.domain=s,dt(E=a,at,lt).call(E,f)})):Array.isArray(i)&&i.length==0?a.w.au.push({partnerId:a.p,category:"sendEvent",event:{type:"empty_seg_array",domain:s}}):a.w.au.push({partnerId:a.p,category:"sendEvent",event:{type:"no_seg_array",domain:s}})}else t.readyState==XMLHttpRequest.DONE&&t.status>200&&a.w.au.push({partnerId:a.p,category:"sendEvent",event:{type:"error_from_seg_service",http_status:t.status,domain:s}})},t.onerror=function(){a.w.au.push({partnerId:a.p,category:"sendEvent",event:{type:"error_calling_seg_service",http_status:t.status,domain:s}})},t.open("POST",e,!0),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify(n)),!0}}at=new WeakSet,Ct=function(){this.iframe=this.d.createElement("iframe"),this.iframe.style.display="none",this.iframe.src=`${St}/join-ad-interest-groups.html`,this.iframe.allow="join-ad-interest-group; attribution-reporting",this.iframe.sandbox="allow-scripts allow-same-origin",this.d.body.appendChild(this.iframe);let r=this;this.iframe.onload=()=>{r.iframeReady=!0,r.iframeQueue.forEach(t=>{var e;dt(e=r,at,lt).call(e,t)})}},lt=function(r){r.channel="AUPA",r.evid=g(8),this.iframeReady==!1?this.iframeQueue.push(r):(this.iframe.contentWindow.postMessage(r,St),dt(this,at,Pt).call(this,r))},Pt=function(r){const t=r.evid;switch(r.consumer){case"AUDIGENT":{const e=r.igs.map(n=>n.name);this.w.au.push({partnerId:this.p,category:"sendEvent",event:{type:"join_ad_interest_group",interest_groups:e,event_id:t}})}break;case"YAHOO":case"NEXTROLL":{const e=r.segs;this.w.au.push({partnerId:this.p,category:"sendEvent",event:{type:"external_audience",audiences:e,event_id:t,consumer:r.consumer}});break}default:break}};var Jt=Object.defineProperty,Xt=Object.defineProperties,zt=Object.getOwnPropertyDescriptors,bt=Object.getOwnPropertySymbols,Qt=Object.prototype.hasOwnProperty,Yt=Object.prototype.propertyIsEnumerable,Tt=r=>{throw TypeError(r)},It=(r,t,e)=>t in r?Jt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,D=(r,t)=>{for(var e in t||(t={}))Qt.call(t,e)&&It(r,e,t[e]);if(bt)for(var e of bt(t))Yt.call(t,e)&&It(r,e,t[e]);return r},ht=(r,t)=>Xt(r,zt(t)),Lt=(r,t,e)=>t.has(r)||Tt("Cannot "+e),xt=(r,t,e)=>(Lt(r,t,"read from private field"),e?e.call(r):t.get(r)),Ot=(r,t,e)=>t.has(r)?Tt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),Rt=(r,t,e,n)=>(Lt(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),ct,ut;const ot=window,pt=document,Gt={"og:title":"title","og:description":"description","og:image":"image","og:url":"url","og:type":"type","og:name":"name","og:locale":"locale"},kt={description:"description",keywords:"keywords"},Kt="meta[name='audigent:tags']";class Zt{constructor(t){Ot(this,ct),Ot(this,ut);const{auvars:e,decoratorTarget:n,taggerStrategy:s}=t||{};this.w=ot,this.u=ot.location,this.d=pt,this.auvars=e,this.dataStore=new rt(ot),this.customOptions={},this.isIndexPage=this.u.pathname==="/",this.customTags=[],this.customAttributes={},this.userDefinedTags=[],this.userDefinedAttributes={},this.internalLinks=[],this.GlobalHandlers={},this.randNum=Math.random(),this.decoratorTarget=n||(this.isIndexPage?.95:.97),this.u.hostname.toLowerCase().endsWith("lnk.to")?this.taggerStrategy="FULL_PATH":this.taggerStrategy=s||this.auvars.tgs||"NONE",Rt(this,ct,new y(this.w,this.d,this.auvars.p)),this.psf=Ft(this.w,this.d),Rt(this,ut,new Wt(this.w,this.d,this.auvars,this.dataStore)),this.setupSessionId(),this.setupHadron(),this.setupGA4()}docReady(){if(this.customOptions.autoPageView!==!1&&this.sendPageView(),this.setupConsentHandler(),this.ListenerIterator("a",this.clickHandler),ot.addEventListener("hashchange",()=>{this.sendSPAPageView({url:this.u.href}),this.pixels()}),window.Shopify){const t=new w(this.w,this.auvars.p,this.auvars.t);t.initialize(),window.addEventListener("aupixels",()=>{t.updatePixels()})}this.psf.includes("JI")&&xt(this,ut).run()}clearOptions(){this.customOptions={}}setOptions(t){const{options:e}=t||{};return typeof e=="object"?(this.customOptions=D(D({},this.customOptions),e),!0):!1}observeDom(t,e,n={childList:!0}){const s=window.MutationObserver||window.WebKitMutationObserver;if(!(!t||t.nodeType!==1))if(s){const a=new s(e);return a.observe(t,n),a}else window.addEventListener&&(t.addEventListener("DOMNodeInserted",e,!1),t.addEventListener("DOMNodeRemoved",e,!1))}push(t,e,n){if(typeof t=="string")return e&&e!==this.auvars.p?(console.warn("[Audigent] skip .push("+t+"), p is not a match"),!1):(console.warn('[Audigent] deprecated use of "push": please use .push( object )'),(this[t]||(()=>!1)).call(this,n),!0);if(t&&typeof t=="object"){const{fn:s,category:a,partnerId:o}=t,i=s||a;if(o&&o!==this.auvars.p)return console.warn("[Audigent] skip .push("+i+"), partnerId is not a match"),!1;if(s){const f=t.args;return Array.isArray(f)?(f.map(E=>(this[i]||(()=>!1)).call(this,E)),!0):((this[i]||(()=>!1)).call(this,f),!0)}return(this[i]||(()=>!1)).call(this,t),!0}return console.warn("[Audigent] could not execute the required command: please check your syntax"),!1}setupHadron(){var t;const e=(t=this.w.hadron)==null?void 0:t.id;this.auvars.h=e||null}getAudigentId(t){if(t instanceof Function)return t(this.auvars.a),this.auvars.a;const{callback:e}=t||{};return e instanceof Function&&e(this.auvars.a),this.auvars.a}setupSessionId(){let t=this.dataStore.get("sid");t==null&&(t=b()),this.auvars.s=t,this.dataStore.set("sid",t,30*I)}getTaggerComponents(){return null}setupTaggerId(){const t=this.u.hostname.toLowerCase(),e=this.getTags();let n=this.getTaggerComponents();Array.isArray(n)&&n.length>0||(this.taggerStrategy=="FULL_PATH"?n=[t,this.u.pathname,this.auvars.p]:Array.isArray(e)&&e.length>0?n=[t,"["+e.join(",").toLowerCase()+"]",this.auvars.p]:n=[t,"/",this.auvars.p]);const s=N(n.join("")).toLowerCase();return this.auvars.t=s,this.dataStore.set("tid",s,A),s}getMetaAttributes(){const t=this.d.querySelectorAll("meta");let e={url:this.u.href,title:this.d.title};for(const n of t){let s;const a=n.getAttribute("property");if(a!==void 0)a in Gt&&(s=Gt[a]);else{const o=n.getAttribute("name");o in kt&&(s=kt[o])}if(s!==void 0){const o=n.getAttribute("content");o!==void 0&&typeof o=="string"&&(s==="keywords"?e[s]=o.split(",").map(i=>i.trim()).filter(i=>i.length>0):(!(s in e)||e[s].length<o.length)&&(e[s]=o))}}return e}getCustomAttributes(){return{}}getAttributes(){return D(D(D(D({},this.customAttributes),this.userDefinedAttributes),this.getCustomAttributes()),this.getMetaAttributes())}clearAttributes(){this.userDefinedAttributes={}}setAttributes(t){const{attributes:e}=t||{};return typeof e=="object"?(this.userDefinedAttributes=e,!0):!1}addAttributes(t){const{attributes:e}=t||{};return typeof e=="object"?(this.userDefinedAttributes=D(D({},this.userDefinedAttributes),e),!0):!1}getMetaTags(){const t=document.head.querySelectorAll(Kt)[0];return t?t.content.split("|").map(e=>e.trim()).filter(e=>e.length>0).map(e=>(this.u.hostname+" > "+e).toUpperCase()):[]}getCustomTags(){return[]}getTags(){return[...this.customTags,...this.userDefinedTags,...this.getCustomTags(),...this.getMetaTags()].filter(e=>typeof e=="string"||e instanceof String).map(e=>e.replace(/,/g,"")).map(e=>e.trim()).filter(e=>e.length>0).map(e=>e.toUpperCase())}clearTags(){this.userDefinedTags=[]}setTags(t){const{tags:e}=t||{};return Array.isArray(e)?(this.userDefinedTags=e,!0):typeof e=="string"?(this.userDefinedTags=[e],!0):!1}addTags(t){const{tags:e}=t||{};return Array.isArray(e)?(this.userDefinedTags=[...e,...this.userDefinedTags],!0):typeof e=="string"?(this.userDefinedTags=[e,...this.userDefinedTags],!0):!1}writeDecoratorRecord(t){const{tags:e,decor_dict:n,attributes:s}=t;this.customTags=[...this.customTags,...e||[]],this.customAttributes=D(D(D({},this.customAttributes),n||{}),s||{})}sendDecoratorRecord(){if(!(this.randNum>=this.decoratorTarget))return null;const e=this.getAttributes(),n=this.getTags(),s=ht(D({},e),{tags:n.join(),tagger_id:this.auvars.t,partner_id:this.auvars.p});let a=new XMLHttpRequest,o=`${Z}/api/v1/dec`;return a.open("POST",o,!0),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(s)),a}setupGA4(){if(this.auvars.ga4===!0)try{let t=document.createElement("script");t.src="https://www.googletagmanager.com/gtag/js?id="+nt+"&l=audDataLayer",t.async=!0,document.head.appendChild(t);const e=this.w;typeof this.w.audGtag!="function"&&(this.w.audDataLayer=this.w.audDataLayer||[],this.w.audGtag=function(){e.audDataLayer.push(arguments)}),audGtag("js",new Date),audGtag("config",nt,{user_id:this.auvars.a,dimension3:this.auvars.p,dimension4:this.u.hostname,dimension5:this.u.pathname,groups:"audigent",send_page_view:!1})}catch(t){console.error(t)}}ListenerIterator(t,e){Array.prototype.forEach.call(this.d.querySelectorAll(t),n=>{this.ListenerAttacher({input:n,method:e})})}ListenerAttacher(t){const{input:e,method:n}=t;e!=null&&(e.addEventListener?e.addEventListener("mousedown",n.bind(this),!1):e.attachEvent&&e.attachEvent("mousedown",n))}GlobalListenerHandler(t){this.GlobalHandlers[t.type].forEach(e=>{if(t.target.matches(e.selector))e.method(t);else{let n=t.target,s=!1;for(;n.parentElement&&!s;)n=n.parentElement,s=n.matches(e.selector),s&&e.method(ht(D({},t),{target:n}))}})}GlobalListenerAttacher(t,e,n){typeof t=="string"&&(t=[t]),t.forEach(s=>{this.GlobalHandlers[s]=this.GlobalHandlers[s]||[],this.GlobalHandlers[s].push({selector:e,method:n}),document.addEventListener?(document.removeEventListener(s,window.au.l),document.addEventListener(s,window.au.l)):document.attachEvent&&(document.detachEvent(s,window.au.l),document.attachEvent(s,window.au.l))})}sendOffsiteClick(t){const{url:e}=t;x(`${it}/api/v1/off-site-click/${this.auvars.p}?tagger_id=${this.auvars.t}&url=${e}`)}clickHandler(t){let e=t.currentTarget.getAttribute("href");e!==null&&this.internalLinks.includes(window.location.hostname)&&window.au.push({category:"sendSPAPageView",url:e})}sendUserBehaviour(t){const{action:e}=t,n={click_url:e,tagger_id:this.auvars.t,audigent_id:this.auvars.a,partner_id:this.auvars.p},s=new Blob([JSON.stringify(n)],{type:"application/json"});this.w.navigator.sendBeacon(`${Z}/api/v1/ubh`,s)}behavior(t){const e=encodeURIComponent(`${this.u.protocol}//${this.u.hostname}${this.u.pathname}__audigent-behavior-${t.action}${this.u.search}${this.u.hash}`);this.sendOffsiteClick({url:e}),this.sendGAEvent({eventCategory:"audigent-behavior",eventAction:t.action,eventLabel:this.auvars.t})}sendEvent(t){let{event:e,events:n,type:s}=t;if(e=e||n,!e){if(!s)return null;e=D({},t),delete e.category,delete e.partnerId}const a={tagger_id:this.auvars.t,partner_id:this.auvars.p,audigent_id:this.auvars.a,events:Array.isArray(e)?e:[e]};let o=new XMLHttpRequest,i=`${Z}/api/v1/event`;return o.open("POST",i,!0),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(a)),""}sendGAEvent(t){const{eventCategory:e,eventAction:n,eventLabel:s,skipSQS:a}=t;this.auvars.ga4===!0&&audGtag("event",e,{eventAction:n,eventLabel:s}),a||window.au.push({category:"sendEvent",event:{type:e,eventAction:n,eventLabel:s}})}sendConsent(t){const e="consent_"+t.consentType.toLowerCase();if(this.dataStore.get("consent_"+t.consentType.toLowerCase()))return;this.dataStore.set(e,t.consentString||"n/a",z);const s={audigent_id:this.auvars.a,tagger_id:this.auvars.t,partner_id:this.auvars.p,consented:t.consented,consent_type:t.consentType,consent_string:t.consentString},a=new Blob([JSON.stringify(s)],{type:"application/json"});return this.w.navigator.sendBeacon(`${Z}/api/v1/con`,a),""}segCapture(){const{au_seg:t}=this.w,e=(t||{}).segments||[];if((e.length>0||this.auvars.p=="584")&&this.randNum>=.9){const n={tagger_id:this.auvars.t,partner_id:this.auvars.p,audigent_id:this.auvars.a,segment_ids:e.length>0?e.join("|"):null};let s=new XMLHttpRequest,a=`${Z}/api/v1/segs`;return s.open("POST",a,!0),s.setRequestHeader("Content-type","application/json"),s.send(JSON.stringify(n)),!0}return!1}pixels(){const t=`${Nt}/api/v1/getpixels?tagger_id=${this.auvars.t}&url=${encodeURIComponent(this.u.href)}&code='none'`;$(t,!0)}setupConsentHandler(){xt(this,ct).addConsentListeners()}sendSPAPageView(t){let{url:e}=t;if(e){e.startsWith("//")&&(e="http://"+e),(e.startsWith("/")||!e.includes("://"))&&(e=this.d.location.protocol+"//"+this.d.location.host+(e.startsWith("/")?"":"/")+e);try{let n=new URL(e);n.host===this.d.location.host&&(this.sendOffsiteClick(n.href),this.sendPageView())}catch(n){}}}tags(t){console.warn("[Audigent] this method is deprecated (params: "+JSON.stringify(t)+"). Use addTags/setTags/clearTags instead. Please contact your account manager for more info.");const n=(t.action||t.data||[]).map(s=>s.toUpperCase());this.push({category:"addTags",tags:n})}conversion(t){console.log(`[Audigent] Conversion Event - ${t.action}`)}sendPageView(t){this.randNum=Math.random();const e=this.setupTaggerId(),n=1*new Date,s={event_timestamp:n,url:this.w.location.href,referrer:this.d.referrer,partner_id:this.auvars.p,tagger_id:this.auvars.t,audigent_id:this.auvars.a,session_id:this.auvars.s,p_s_f:this.psf};this.auvars.h&&(s.hadron_id=this.auvars.h);const a=(t||{}).data||{},o={category:"pageView",version:"v2",created_at:n,properties:D(D({},s),a)};let i=new XMLHttpRequest,f=`${it}/api/v1/collect`;i.open("POST",f,!0),i.withCredentials=!0,i.setRequestHeader("Content-type","text/plain"),i.send(this.w.btoa(JSON.stringify(o))),this.pixels(),this.sendDecoratorRecord(),this.auvars.ga4===!0&&(audGtag("set",{dimension7:e,send_to:nt}),(this.randNum>=.95||["158"].includes(this.auvars.p.toString())&&this.randNum>=.8||["220"].includes(this.auvars.p.toString())&&this.randNum>=.5)&&audGtag("event","page_view",{dimension7:e,send_to:nt}))}beopEvent(t){const e=t.partnerId||this.auvars.p;this.sendEvent({event:ht(D({},t.data||{}),{partner_id:e,type:"beop"})})}trackEvent(t){return!1}DispatchEvent(t){const{eventName:e}=t,s=(a=>{if(typeof window.CustomEvent=="function")return new CustomEvent(a);const o={bubbles:!1,cancelable:!1,detail:void 0},i=document.createEvent("CustomEvent");return i.initCustomEvent(a,o.bubbles,o.cancelable,o.detail),i})(e);window.dispatchEvent(s)}optout(){x(`${Bt}/api/v1/optout?au_id=${this.auvars.a}`)}setupInPageTaxonomy(t){let e=new URL(`${At}/api/v1/segments`);if(e.searchParams.set("url",encodeURIComponent(this.u.href)),e.searchParams.set("partner_id",this.auvars.p),this.auvars.t!==void 0)e.searchParams.set("tagger_id",this.auvars.t);else{const a=this.setupTaggerId();e.searchParams.set("tagger_id",a)}e.searchParams.set("au_id",this.auvars.a);let n=new XMLHttpRequest,s=this;n.timeout=1e4,n.onload=function(){if(n.readyState==XMLHttpRequest.DONE&&n.status==200){const o=JSON.parse(n.response);s.w.au_seg=o,(t||[]).forEach(i=>i(ot,pt,o.segments));var a=new CustomEvent("auSegReady",{detail:o});pt.dispatchEvent(a),s.segCapture()}},n.ontimeout=function(){console.log("[Audigent] Taxonomy Service > Timeout")},n.onerror=function(){console.log("[Audigent] Taxonomy Service > Invalid Response")},n.open("GET",e,!0),n.send()}addUserIdentity(t){if(!t)return!1;const{identityType:e,identityValue:n}=t;if(e===void 0||n===void 0)return!1;if(e==="email"){const s=window.btoa(n);return this.sendEvent({event:{type:"e",value:s}})}else return this.sendEvent({event:{type:"u",[e]:n,identityType:e,identityValue:n}})}addUserEmailAddress(t){if(!t)return!1;const{identityValue:e}=t;if(e===void 0)return!1;let n=e.toLowerCase().trim();if(n.endsWith("@gmail.com")){let a=n.split("@")[0];a=a.split("+")[0],a=a.replace(/\./g,""),n=a+"@gmail.com"}const s=O()(n).toString();return this.addUserIdentity({identityType:"hem_sha256",identityValue:s})}addUserProperty(t){if(!t)return!1;const{propertyName:e,propertyValue:n}=t;return e===void 0||n===void 0?!1:e==="email"?this.addUserIdentity({identityType:"email",identityValue:n}):this.sendEvent({event:{type:"user.property",propertyName:e,propertyValue:n}})}}ct=new WeakMap,ut=new WeakMap;const te=Zt;var ee=Object.defineProperty,re=Object.defineProperties,se=Object.getOwnPropertyDescriptors,qt=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,ft=(r,t,e)=>t in r?ee(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Dt=(r,t)=>{for(var e in t||(t={}))ne.call(t,e)&&ft(r,e,t[e]);if(qt)for(var e of qt(t))ae.call(t,e)&&ft(r,e,t[e]);return r},Ht=(r,t)=>re(r,se(t)),Q=(r,t,e)=>ft(r,typeof t!="symbol"?t+"":t,e);class ie{constructor(t,e,n){Q(this,"lineItemsContain",s=>this.lineItemIds.map(a=>a.toString()).includes((s||"").toString())),Q(this,"setJWPlayerListener",()=>{window.jwplayer&&(window.jwplayer().on("adImpression",this.readJWPlayerImpression),window.jwplayer().on("adComplete",s=>this.readJWPlayerImpression(s,!0)))}),Q(this,"readJWPlayerImpression",(s,a)=>{var o;window.auvars[this.auvars.p].jwp_impressions=window.auvars[this.auvars.p].jwp_impressions||[],window.auvars[this.auvars.p].jwp_impressions.push(s);const i="",f="",E=s.viewable,P=s.viewable,k=`jwplayer-${s.placement}`,{pageTop:u,pageBot:c,slotMiddle:d}=this.determineViewability(window.jwplayer().getContainer())||{},l=((o=s==null?void 0:s.ima)==null?void 0:o.ad)||{},v=(l==null?void 0:l.data)||(l==null?void 0:l.g)||{};(v.adWrapperIds||[]).forEach((C,_)=>{const G=C,R=v.adWrapperCreativeIds[_],T=v.mediaUrl,mt={advertiser_id:i,campaign_id:f,line_item_id:G,creative_id:R,ad_slot_id:k,creative_blob:T,viewable:E,inViewPercentage:P,pageTop:u,pageBot:c,slotMiddle:d,event:"jwplayerAdImpression"};this.adSlots[k]=mt,window.au.push({category:"sendEvent",events:[Ht(Dt({type:"jwp_impression"},mt),{jwpType:s.type||""})]}),v.adWrapperSystems[_]==="GDFP"&&this.lineItemsContain(C)&&!a&&this.sendAdSlotInformation(mt)})}),Q(this,"getAdSlotPayload",s=>{if(!s)return!1;const{advertiserId:a,campaignId:o,lineItemId:i,creativeId:f}=s.getResponseInformation()||{},E=document.getElementById(s.getSlotElementId()),P="",{pageTop:k,pageBot:u,slotMiddle:c,viewable:d,inViewPercentage:l}=this.determineViewability(E)||{};return{advertiser_id:a,campaign_id:o,line_item_id:i,creative_id:f,ad_slot_id:s.getAdUnitPath(),creative_blob:P,viewable:d,inViewPercentage:l,pageTop:k,pageBot:u,slotMiddle:c}}),Q(this,"collectAndSendGoogleAdSlot",(s,a)=>{const o=this.getAdSlotPayload(s)||{};return o.event=a,this.adSlots[o.ad_slot_id]=o,this.sendAdSlotInformation(o),!0}),Q(this,"determineInViewPercentage",(s,a)=>{let o=0;return s.top>=0&&s.bottom<=a&&(o=1),s.top<0&&s.bottom>0&&s.bottom<=a&&(o=s.bottom/s.height),s.top>=0&&s.top<=a&&s.bottom>a&&(o=(a-s.top)/s.height),Math.round(o*100)}),Q(this,"determineViewability",s=>{const a=window.scrollY,o=window.innerHeight,i=a+o;let f=-1,E=0,P=E>=50;if(s){const k=s.getBoundingClientRect();f=Math.round(k.top+k.height/2),E=this.determineInViewPercentage(k,o),P=E>=50}return{pageTop:a,pageBot:i,slotMiddle:f,viewable:P,inViewPercentage:E}}),Q(this,"compareVisiblePercentage",(s,a,o)=>{const i=s.getAdUnitPath();this.adSlots[i]?this.adSlots[i].inViewPercentage<50&&a>=50&&this.collectAndSendGoogleAdSlot(s,o):this.collectAndSendGoogleAdSlot(s,o)}),Q(this,"setGoogleEventListener",()=>{window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push(()=>{window.googletag.pubads().addEventListener("slotRenderEnded",s=>{this.collectAndSendGoogleAdSlot(s.slot,"slotRenderEnded")})}),window.googletag.cmd.push(()=>{window.googletag.pubads().addEventListener("slotOnload",s=>{this.collectAndSendGoogleAdSlot(s.slot,"slotOnload")})}),window.googletag.cmd.push(()=>{window.googletag.pubads().addEventListener("impressionViewable",s=>{this.collectAndSendGoogleAdSlot(s.slot,"impressionViewable")})}),window.googletag.cmd.push(()=>{window.googletag.pubads().addEventListener("slotVisibilityChanged",s=>{this.compareVisiblePercentage(s.slot,s.inViewPercentage,"slotVisibilityChanged")})})}),Q(this,"getCurrentGoogleAdSlots",()=>{const s=window.googletag&&window.googletag.pubads&&window.googletag.pubads().getSlots();return s?(s.forEach(a=>this.collectAndSendGoogleAdSlot(a,"pageLoad")),!0):!1}),Q(this,"sendAdSlotInformation",s=>{if(!this.orderIds.includes(s.campaign_id)&&!this.lineItemsContain(s.line_item_id))return!1;const a=Ht(Dt({},s),{audigent_id:this.auvars.a,tagger_id:this.auvars.t,partner_id:this.auvars.p,visit_id:this.auvars.visit_id,partner_site_host:window.location.hostname,partner_site_path:window.location.pathname});window.auvars[this.auvars.p].ad_slot_events=window.auvars[this.auvars.p].ad_slot_events||[],window.auvars[this.auvars.p].ad_slot_events.push(a);const o=new XMLHttpRequest,i=`${Z}/api/v1/otp/dfp`;return o.open("POST",i,!0),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(a)),o}),this.auvars=t,this.adSlots={},this.orderIds=e||[],this.lineItemIds=n||[],this.getCurrentGoogleAdSlots(),this.setGoogleEventListener()}}const oe=ie;var me=X(116);function de(r,t){const e="158";let n=r.au&&Array.isArray(r.au)?[...r.au]:[];r.auvars.autag_objs=[...(r.auvars.autag_objs||[]).filter(s=>s!=="autag"),"autag"],r.au={push:(...s)=>{r.auvars.autag_objs.forEach(a=>Object.values(r[a]||{}).forEach(o=>o.push(...s)))},l:s=>{r.auvars.autag_objs.forEach(a=>Object.values(r[a]||{}).forEach(o=>o.GlobalListenerHandler(s)))},init:()=>{r.auvars[e].hist=r.auvars[e].hist||[];const s=r.auvars[e].hist.slice(-1)[0];r.autag=r.autag||{},(!r.autag[e]||s!==r.location.href)&&(r.auvars[e].hist.push(r.location.href),r.autag[e]=t({auvars:r.auvars[e]}))}},r.au.init(),n.forEach(s=>r.au.push(s))}docReady(()=>window.au.push({category:"docReady"}));var ce=Object.defineProperty,ue=Object.defineProperties,le=Object.getOwnPropertyDescriptors,Mt=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,gt=(r,t,e)=>t in r?ce(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,vt=(r,t)=>{for(var e in t||(t={}))he.call(t,e)&&gt(r,e,t[e]);if(Mt)for(var e of Mt(t))pe.call(t,e)&&gt(r,e,t[e]);return r},Vt=(r,t)=>ue(r,le(t)),fe=(r,t,e)=>gt(r,typeof t!="symbol"?t+"":t,e);class ge extends te{constructor(t){super(t),fe(this,"checkJW",()=>this.jwp?(window.clearInterval(this.jwpInterval),null):(window.jwplayer&&(this.jwp=!0,this.smartOtpDfp.setJWPlayerListener()),null)),this.tagsReader(),this.auvars.visit_id=O()(`${this.auvars.a}-${this.auvars.p}-${Date.now()}`).toString(),this.orderIds=[2900055810,2800288231,2891350216,2430343433,2877953001,2776381195,2841579083,2914646399,2811709422,2926983725,2796335699,2884513845,2829955320,2903841116,2733074813,2697661630,2792713087,2921587863,2939321473,2938145417,2947289709,2959018529,2956847257,2956205941,2958816444,2970924710,2972735884,2983676295,2994581224,2983439165,2991963287,3003612211,3028254224,3029976933,3032140244,3038913241,3034810542,2980079696,3073088604,3079108697,3089527339,3075341921,3150448250,3098451535,3113785080,3201949431,3194669712,3207760019,3214762549,3209458972,3219912403,3234412535,3253098606,3252727333,3253469729,3255205111,3263607100,3260923330,3264020863,3267059893,3268976762,3269601010,3271897640,3343579169,3353730232,3253065077,3242703809,3530992455,3532992876,3531555334,3532177864,3535506658,3535602842,3548140975,3545901268,3569419584,3592056686,3592533493,3595161349,3595068677,3631212408,3679323811,3694293311,3694293311,3694294079,3694294013,3694294463],this.lineItemIds=["5837159488","5571436280","5783448216","5570139759","5783448225","5570139741","5761545988","5838772240","5785369187","5784798379","5835922698","5784798388","5837159503","5784798376","5785369859","5837159494","5839420556","5785369856","5570139747","5784798370","5785369853","5699466638","5570139750","5823087115","5838769909","5837159491","5788427160","5837159506","5835922689","5570139753","5571256462","5835922692","5784798385","5835922695","5838772237","5570139756","5823087109","5785369199","5785369193","5783448219","5823087118","5732727358","5571436277","5784798391","5779072942","5823087112","5838772246","5775108648","5823087103","5838772243","5785369184","5823087106","5732728285","5837159497","5784798373","5785369190","5785369196","5837159500","5790369275","5570139744","5784798382","5784798394","5783448222","5837159485","5837500044","5864800215","5864800221","5864800224","5866713284","5864800227","5864800230","5864800233","5864800236","5866042051","5866713287","5863568100","5863568103","5863568106","5863568109","5863568112","5863568115","5863568313","5863568316","5863568319","5864823262","5864823268","5863568097","5863568136","5863568139","5863568301","5863568304","5863568307","5863568310","5863568118","5863568121","5863568124","5863568127","5863568130","5863568133","5865821662","5893449075","5966923345","5966925760","5967431645","5967445127","5966923342","5966925265","5966925268","5966925271","5966925757","5966925763","5966925766","5966925769","5967431648","5967448694","5967448697","6308957647","6321323944","6321335251","6319186044","6319186023","6319186293","6321334972","6321335413","6321335449","6321335476","6321335680","6321930437","6321930458","6351603345","6402338322","6509316876","6511558030","6511687594","6511811675","6700247472","6793047537","6793047570","6793048296","6793048476","6796446380","6796442831","6796445708","6796054756","6796054768","6796054774","6796055917","6806418228","6806418225","6806981200","6829336271","6861132386","6825932148","6860012134","6861132395","6853501324","6853502092","6831392357","6827876331","6831392396","6831392531","6831392546","6825932145","6829336262","6886739423","6901846758","6905567432","6905566784","6905553539","6905567435","6905567258","6905567723","6905566952","6904528708","6904528711"],this.jwp=!1}docReady(){super.docReady(),this.smartOtpDfp=new oe(this.auvars,this.orderIds,this.lineItemIds),window.jwplayer?(this.jwp=!0,this.smartOtpDfp.setJWPlayerListener()):this.jwpInterval=window.setInterval(this.checkJW,100)}sendEcommerceEvent(t){const{type:e,data:n}=t,s=new h;window.addEventListener("aupixels",()=>{s.updatePixels()});const a="Fandom";if(!e||!n)return!1;if(e==="add"||e==="add_to_cart"){const o=Vt(vt({},n),{brand:n.brand||a});s.sendAddProductEventToGA(o);const i={event:"addToCart",data:o};window.au.push({category:"behavior",action:"purchase-intent"}),s.profilerServiceRequest(i)}if(e==="transaction"){const o=Vt(vt({},n),{id:`${n.orderId}-${this.auvars.t}`,affiliation:n.brand||a});let i=o.items||[];i.length&&(i=i.map(f=>({id:f.productId||"",name:f.name||"",brand:f.brand||a,price:f.price||0,quantity:f.quantity||1}))),this.sendEvent({events:[vt({type:"purchase"},n)]}),s.appendPageLoadPixelCheck("transaction"),s.sendAllProductsInTransactionToGA(i,()=>s.sendTransactionEventToGA(o)),window.localStorage.setItem("autx",JSON.stringify([...JSON.parse(window.localStorage.getItem("autx")||"[]"),n.orderId]))}return null}tagsReader(){let t=[];const e=[],n=[],s=this.d.querySelectorAll("div[data-gpt-page-params]"),a={gnre:["genre",[]],tv:["tv",[]],media:["media",[]],s0:["vertical",[]],s0c:["category",[]],esrb:["esrb",[]],pform:["platform",[]],pub:["publisher",[]],theme:["content theme",[]]};e.push((((window.ads||{}).context||{}).targeting||{}).wikiCategory||null),n.push((((window.ads||{}).context||{}).targeting||{}).wikiVertical||null),s.forEach(P=>{const k=JSON.parse(P.getAttribute("data-gpt-page-params"));Object.keys(a).forEach(u=>{let c=k[u]||[];typeof c=="string"&&(c=[c]),c.forEach(d=>{a[u][1].includes(d.toLowerCase())||a[u][1].push(d.toLowerCase())}),e.push(k.s0||null),n.push(k.s0v||null)})}),Object.values(a).forEach(P=>P[1].forEach(k=>t.push(`${P[0].toLowerCase()} > ${k.toLowerCase()}`))),t=t.map(P=>P.toUpperCase());const o={};if(o.primaryCategory=Array.from(new Set(e.filter(P=>P>""))).join(),o.pageType=Array.from(new Set(n.filter(P=>P>""))).join(),this.u.hostname.match(/(gamespot\.com|giantbomb\.com|metacritic\.com|tvguide\.com)$/gi)==null){this.push({category:"writeDecoratorRecord",tags:t,decor_dict:o});return}const i=this.d.querySelector('meta[name="adtags"]');if(i==null){this.push({category:"writeDecoratorRecord",tags:t,decor_dict:o});return}const f={genre:"GENRE",gnre:"GENRE",productGenre:"GENRE",game:"GAME",franchise:"FRANCHISE",con:"PLATFORM",pform:"PLATFORM",network:"TV",tv:"TV",ptype:"PAGE TYPE"};new URLSearchParams(i.getAttribute("content")).forEach((P,k)=>{if(P.indexOf("|")>-1)return;const u=f[k];if(u){let c=!0;k==="ptype"&&(this.u.hostname.match(/gamespot\.com/gi)!=null&&["reviews_door","entertainment_reviews_door","review"].includes(P)||this.u.hostname.match(/metacritic\.com/gi)!=null&&["critic_reviews","user_reviews"].includes(P)?P="REVIEWS":c=!1),c&&(t=[...t,...P.split(",").filter(d=>(typeof d=="string"||d instanceof String)&&d.trim().length>0&&d!=="undefined").map(d=>`N&R > ${u} > ${d.trim()}`.toUpperCase())])}}),this.push({category:"writeDecoratorRecord",tags:t,decor_dict:o})}}(function(r){de(r,function(t){return new ge(t)})})(window)})()})();})();